<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <title>蒼貓模型懸賞名單展示區</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@900&display=swap');

        /* 網頁大背景：由資料自動設定 */
        body { 
            font-family: 'Noto Sans TC', sans-serif; 
            background-color: #1a1a1a; 
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            background-attachment: fixed; 
            display: flex; flex-direction: column; align-items: center; 
            color: #f1f1f1; margin: 0; padding: 40px 20px;
            min-height: 100vh;
            image-rendering: -webkit-optimize-contrast;
        }

        h1 { 
            font-size: 85px; font-weight: 900; letter-spacing: 8px;
            color: #ffcc33; 
            background: linear-gradient(to bottom, #fff3b0 0%, #ffcc33 50%, #d4a017 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            filter: drop-shadow(4px 4px 0px #000);
            margin-bottom: 50px;
            text-align: center;
        }

        #poster-container { display: flex; flex-wrap: wrap; justify-content: center; gap: 40px; }

        /* 懸賞令本體：完全移除編輯控制項，只留瀏覽功能 */
        .wanted-poster {
            width: 320px; background-color: #dfc9a5; 
            background-image: url('https://www.transparenttextures.com/patterns/papyros.png'); 
            padding: 30px 20px 15px 20px; color: #3e2723;
            text-align: center; box-shadow: 0 15px 35px rgba(0,0,0,0.8);
            border: 1px solid #bc9b6a; box-sizing: border-box;
        }

        .wanted-header { 
            font-size: 64px; font-family: 'Impact', sans-serif;
            font-weight: 900; line-height: 0.8; margin-bottom: 10px; transform: scaleY(1.2);
        }

        .photo-area {
            width: 270px; height: 200px; background: rgba(62, 39, 35, 0.05); 
            margin: 0 auto; border: 5px solid #3e2723;
            display: flex; align-items: center; justify-content: center;
            overflow: hidden; position: relative;
        }

        .photo-area img { 
            width: 100%; height: 100%; object-fit: cover; 
            position: absolute; image-rendering: high-quality;
        }
        
        .dead-or-alive { 
            font-size: 18px; font-family: 'Impact', sans-serif;
            margin: 8px 0; display: flex; align-items: center; justify-content: space-between;
        }
        .dead-or-alive::before, .dead-or-alive::after { content: "๑"; font-size: 25px; }

        .crime-display {
            font-size: 16px; font-weight: bold; text-transform: uppercase;
            margin-bottom: 15px; letter-spacing: 1px; min-height: 20px;
        }

        .name-display { 
            font-size: 36px; font-family: 'Impact', sans-serif;
            text-transform: uppercase; line-height: 1.2; min-height: 45px;
        }

        .bounty-display { font-size: 22px; font-family: 'Impact', sans-serif; margin-top: 5px; }

        .marine-footer { font-size: 26px; font-family: 'Impact', sans-serif; text-align: right; margin-top: -5px; }

        /* 載入中動畫 */
        .loading { font-size: 24px; color: #ffcc33; margin-top: 50px; }
    </style>
</head>
<body>

    <h1>蒼貓模型懸賞名單展示區</h1>

    <div id="poster-container">
        <div class="loading">正在追蹤懸賞對象...</div>
    </div>

    <script>
        // 設定與後台相同的 GitHub 資訊
        const githubUser = "timcause-bbnet";
        const githubRepo = "wanted-list";

        async function loadPosters() {
            const container = document.getElementById('poster-container');
            // 加上時間戳記防止瀏覽器快取舊資料
            const url = `https://raw.githubusercontent.com/${githubUser}/${githubRepo}/main/data.json?t=${Date.now()}`;

            try {
                const response = await fetch(url);
                if (!response.ok) throw new Error("尚未有發佈的資料");
                
                const data = await response.json();

                // 1. 設定背景
                if (data.bg) {
                    document.body.style.backgroundImage = `url(${data.bg})`;
                }

                // 2. 渲染懸賞令
                container.innerHTML = "";
                if (data.posters.length === 0) {
                    container.innerHTML = '<div class="loading">目前沒有被懸賞的對象。</div>';
                    return;
                }

                data.posters.forEach(p => {
                    const posterDiv = document.createElement('div');
                    posterDiv.innerHTML = `
                        <div class="wanted-poster">
                            <div class="wanted-header">WANTED</div>
                            <div class="photo-area">
                                <img src="${p.img}" style="top:${p.top}; left:${p.left}; transform: scale(1.2);">
                            </div>
                            <div class="dead-or-alive">DEAD OR ALIVE</div>
                            <div class="crime-display">${p.crime}</div>
                            <div class="name-display">${p.name}</div>
                            <div class="bounty-display">${p.bounty}</div>
                            <div class="marine-footer">MARINE</div>
                        </div>
                    `;
                    container.appendChild(posterDiv);
                });

            } catch (error) {
                container.innerHTML = `<div class="loading">❌ 無法載入名單：${error.message}</div>`;
            }
        }

        // 頁面載入後執行
        window.onload = loadPosters;
    </script>
</body>
</html>